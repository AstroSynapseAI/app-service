import{u as D,r as l,D as k,v as b,o as C,x as f,A as y,f as s,M as _,N as v,y as I,c as h}from"./index-a5a8c750.js";const V={key:0,class:"adminSpinner"},x={class:"container-fluid p-0"},B=s("h1",{class:"h3 mb-3"},"Account",-1),M={class:"card"},S={class:"card-body"},A={class:"container p-4"},F=s("h3",null,"User Information",-1),L={class:"row"},T={class:"col-6"},E={class:"form-floating mb-3"},j=s("label",{for:"username"},"Username",-1),q={class:"row"},z={class:"col-6"},G={class:"form-floating mb-3"},H=s("label",{for:"firstName"},"First Name",-1),J={class:"col-6"},K={class:"form-floating mb-3"},O=s("label",{for:"lastName"},"Last Name",-1),Q={class:"row"},R={class:"col-12"},W=["disabled"],X=s("hr",null,null,-1),Y=s("h3",null,"Change Password",-1),Z={class:"row"},$={class:"col-6"},ss={class:"form-floating mb-3"},es=s("label",{for:"newPassword"},"New Password",-1),os={class:"col-6"},ts={class:"form-floating mb-3"},as=s("label",{for:"confirmPassword"},"Confirm Password",-1),ls={key:0},ns={key:1},rs={class:"row"},cs={class:"col-12"},is=["disabled"],_s={__name:"ProfileView",setup(ds){const e=D(),c=l(""),n=l(""),r=l(""),i=l(""),d=l("");l(""),l("");const u=l(!1),p=l(!1),m=k(),w=()=>{p.value=!0},P=b(()=>!c.value.trim()||!i.value.trim()||!d.value.trim()),g=b(()=>!n.value.trim()||!r.value.trim()||r.value.length<8||n.value!==r.value),N=async()=>{u.value=!0;try{const t={username:c.value,first_name:i.value,last_name:d.value};e.account&&(t.account_id=e.account.ID),await e.saveProfile(e.current.ID,t),m.success("Profile updated successfully!")}catch(t){m.error(t)}finally{u.value=!1}},U=async()=>{u.value=!0;try{await e.changePassword(e.current.ID,{password:n.value}),m.success("Password changed successfully!")}catch(t){m.error(t)}finally{u.value=!1}};return C(async()=>{c.value=e.current.username;try{await e.getUserAccounts(e.current.ID),e.account&&(c.value=e.account.username??"",i.value=e.account.first_name,d.value=e.account.last_name)}catch(t){console.error(t)}feather.replace()}),(t,o)=>(h(),f(I,null,[u.value?(h(),f("div",V)):y("",!0),s("div",x,[B,s("div",M,[s("div",S,[s("div",A,[F,s("div",L,[s("div",T,[s("div",E,[_(s("input",{type:"text",class:"form-control",id:"username",placeholder:"Username","onUpdate:modelValue":o[0]||(o[0]=a=>c.value=a)},null,512),[[v,c.value]]),j])])]),s("div",q,[s("div",z,[s("div",G,[_(s("input",{type:"text",class:"form-control",id:"firstName",placeholder:"First Name","onUpdate:modelValue":o[1]||(o[1]=a=>i.value=a)},null,512),[[v,i.value]]),H])]),s("div",J,[s("div",K,[_(s("input",{type:"text",class:"form-control",id:"lastName",placeholder:"Last Name","onUpdate:modelValue":o[2]||(o[2]=a=>d.value=a)},null,512),[[v,d.value]]),O])])]),s("div",Q,[s("div",R,[s("button",{class:"btn btn-primary float-end",onClick:N,disabled:P.value},"Save",8,W)])]),X,Y,s("div",Z,[s("div",$,[s("div",ss,[_(s("input",{type:"password",class:"form-control",id:"newPassword",placeholder:"New Password","onUpdate:modelValue":o[3]||(o[3]=a=>n.value=a),onInput:w},null,544),[[v,n.value]]),es])]),s("div",os,[s("div",ts,[_(s("input",{type:"password",class:"form-control",id:"confirmPassword",placeholder:"Confirm Password","onUpdate:modelValue":o[4]||(o[4]=a=>r.value=a),onInput:w},null,544),[[v,r.value]]),as,p.value&&n.value!==r.value?(h(),f("div",ls," Passwords do not match ")):p.value&&n.value.length.trim<8||r.value.length<8?(h(),f("div",ns," New password has to have more than 8 characters ")):y("",!0)])])]),s("div",rs,[s("div",cs,[s("button",{class:"btn btn-primary float-end",onClick:U,disabled:g.value},"Change",8,is)])])])])])])],64))}};export{_s as default};
