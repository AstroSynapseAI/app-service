import{q as N,s as z,_ as B,v as R,x as v,y as Z,b as p,z as h,o as _,i as o,A as W,w as L,e as l,f as b,B as G,C as Y,g as t,D as x,F as H,G as X,m as f,p as V,n as k,H as F,I as g,d as a,j as P,k as D,J as c,K as q,l as K}from"./index-a228bdd3.js";const O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAC7CAYAAACtg5alAAAAAXNSR0IArs4c6QAABB50RVh0bXhmaWxlACUzQ214ZmlsZSUyMGhvc3QlM0QlMjJFbGVjdHJvbiUyMiUyMG1vZGlmaWVkJTNEJTIyMjAyMy0wNS0xMFQyMSUzQTE0JTNBMzcuODM0WiUyMiUyMGFnZW50JTNEJTIyNS4wJTIwKE1hY2ludG9zaCUzQiUyMEludGVsJTIwTWFjJTIwT1MlMjBYJTIwMTBfMTVfNyklMjBBcHBsZVdlYktpdCUyRjUzNy4zNiUyMChLSFRNTCUyQyUyMGxpa2UlMjBHZWNrbyklMjBkcmF3LmlvJTJGMTYuMS4yJTIwQ2hyb21lJTJGOTYuMC40NjY0LjU1JTIwRWxlY3Ryb24lMkYxNi4wLjUlMjBTYWZhcmklMkY1MzcuMzYlMjIlMjB2ZXJzaW9uJTNEJTIyMTYuMS4yJTIyJTIwZXRhZyUzRCUyMnFoZnRLTWQ4NjZPUkhWOFUzMW45JTIyJTIwdHlwZSUzRCUyMmRldmljZSUyMiUzRSUzQ2RpYWdyYW0lMjBpZCUzRCUyMk82T0VqLXJwYmJSYnoycHQ5YXI1JTIyJTNFN1ZaTmI0TXdEUDAxM0lGQWFZOWIxMjZYU1pWNjJEa2lIbVFMR0lYUWolMkYzNmhTWjhwTjNVcmRwNktoZmlGJTJGdlpzUjhSSHBrWHUwZEpxJTJGd1pHUWd2OU5uT0l3OWVHQWFCUDlHdkZ0a2JaRFpMREpCSnpxelRBS3o1QjFqUXQyakRHZFNPbzBJVWlsY3VtR0paUXFvY2pFcUpXOWZ0RllXYnRhSVpuQURybElwVDlJVXpsUnQwR2lZRCUyRmdROHk3dk13V1JtZGdyYU9kdVQxRGxsdUIxQlpPR1J1VVJVWmxYczVpRGE1blY5TVhITGIzYjd3aVNVNmljQm9RbllVTkhZczltNjFMNDdMSlRzcnUyWnRrb3NOWGlmcTBKb0s5QkxpVTNKb0NYenRWVXJLcFVkMTBUYk9uUms2YzBNMUFva0wwQ0JYRmMwNVdYV2gwcDhoemtLbEllMFpIbDQlMkJwMnV6eTNSVzFOVWExdWdMY2xVRGV4a2JrTWpncjY5V3BlQXVnYTUxeTdiWVlDeEhVbyUyQm1sMkhTUkJVOFkxTFQ2Mk9zcDZ1ejdCQ3JoT0h2dFU4aVlrSnNZcWZFTiUyQmxxTEdSS2RpbzhjRE9FRVh4RVpIdDhqR1JYb3lPUFVBSFBYeXREWExUeHBXMEVibmE2TzZSMzJvalNzNFElMkZaMDJvcHMycnFLTktQbWplJTJCT1k2QiUyRnZqZmltamV2Y0cxUDNjNCUyQm44WVhhaU00UVhhd05iUTclMkZNc1o5JTJCQ01raTA4JTNEJTNDJTJGZGlhZ3JhbSUzRSUzQyUyRm14ZmlsZSUzRXo0Vd8AAASaSURBVHhe7ZxRUhxXEARnTmbdTNLN7JOtQwqwFwUiAwjUPUnyqdrhvapMluVH59HXp17g/NTtK38kwCeX4Lzdbt/uNrgdx/9SnOd5n33yqa5Zn/g+CvD1mXrfE+Ca0O9v/SDAb/kmwPUZv9ggAeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKneZQR4uOjtOI7zl1LP/dv9Syj/3Wsfn3vN87T3q/LzPL+96oE3vPhqAnx9Q8erPvI9Ae7QvWDqVQHTvRPgyXvz7fbj7bB3ANLmlXm/Al452B98ee8AvQP0IfA/Bx7eqv7gD+D8UX0InGegv8FlPgPoSQwVTICh4bccmwBbSAzdIwGGht9ybAJsITF0jwQYGn7LsQmwhcTQPRJgaPgtxybAFhJD90iAoeG3HJsAW0gM3SMBhobfcmwCbCExdI8EGBp+y7EJsIXE0D0SYGj4LccmwBYSQ/dIgKHhtxybAFtIDN0jAYaG33JsAmwhMXSPBBgafsuxCbCFxNA9EmBo+C3HJsAWEkP3SICh4bccmwBbSAzdIwGGht9ybAJsITF0jwQYGn7LsQmwhcTQPRJgaPgtxybAFhJD90iAoeG3HPseAf4+juOfLUW6x5sX+Os4ji/PPP3zfyk7XzDkzSf24CUWSIBLYPq4SybAx217ie+cAJfA9HGXTICP2/YS3/mJAPc3/vGp8fGrvwIuwfLFS97zfML1518B1+9Xg/cskADvWU/wbAIIIL6nwr+sixolUHBQyAAAAABJRU5ErkJggg==",$="/assets/user-icon-a729db5f.png",E="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAArCAYAAAC91zLkAAAAAXNSR0IArs4c6QAABtF0RVh0bXhmaWxlACUzQ214ZmlsZSUyMGhvc3QlM0QlMjJFbGVjdHJvbiUyMiUyMG1vZGlmaWVkJTNEJTIyMjAyMy0xMS0wN1QxOCUzQTMzJTNBNTguNTI0WiUyMiUyMGFnZW50JTNEJTIyTW96aWxsYSUyRjUuMCUyMChNYWNpbnRvc2glM0IlMjBJbnRlbCUyME1hYyUyME9TJTIwWCUyMDEwXzE1XzcpJTIwQXBwbGVXZWJLaXQlMkY1MzcuMzYlMjAoS0hUTUwlMkMlMjBsaWtlJTIwR2Vja28pJTIwZHJhdy5pbyUyRjIyLjAuMyUyMENocm9tZSUyRjExNC4wLjU3MzUuMjg5JTIwRWxlY3Ryb24lMkYyNS44LjQlMjBTYWZhcmklMkY1MzcuMzYlMjIlMjB2ZXJzaW9uJTNEJTIyMjIuMC4zJTIyJTIwZXRhZyUzRCUyMkZVeGxIUDNDcnJoc2dFYWo0SVF1JTIyJTIwdHlwZSUzRCUyMmRldmljZSUyMiUzRSUwQSUyMCUyMCUzQ2RpYWdyYW0lMjBuYW1lJTNEJTIyUGFnZS0xJTIyJTIwaWQlM0QlMjI4ZF9taGozQVVEWXo5SkpuaGlCciUyMiUzRSUwQSUyMCUyMCUyMCUyMCUzQ214R3JhcGhNb2RlbCUyMGR4JTNEJTIyMTYzJTIyJTIwZHklM0QlMjIxNDYlMjIlMjBncmlkJTNEJTIyMSUyMiUyMGdyaWRTaXplJTNEJTIyMTAlMjIlMjBndWlkZXMlM0QlMjIxJTIyJTIwdG9vbHRpcHMlM0QlMjIxJTIyJTIwY29ubmVjdCUzRCUyMjElMjIlMjBhcnJvd3MlM0QlMjIxJTIyJTIwZm9sZCUzRCUyMjElMjIlMjBwYWdlJTNEJTIyMSUyMiUyMHBhZ2VTY2FsZSUzRCUyMjElMjIlMjBwYWdlV2lkdGglM0QlMjI4MjclMjIlMjBwYWdlSGVpZ2h0JTNEJTIyMTE2OSUyMiUyMG1hdGglM0QlMjIwJTIyJTIwc2hhZG93JTNEJTIyMCUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUzQ3Jvb3QlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteENlbGwlMjBpZCUzRCUyMjAlMjIlMjAlMkYlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteENlbGwlMjBpZCUzRCUyMjElMjIlMjBwYXJlbnQlM0QlMjIwJTIyJTIwJTJGJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhDZWxsJTIwaWQlM0QlMjIyJTIyJTIwdmFsdWUlM0QlMjIlMjIlMjBzdHlsZSUzRCUyMmVuZEFycm93JTNEbm9uZSUzQmh0bWwlM0QxJTNCcm91bmRlZCUzRDAlM0JzdHJva2VDb2xvciUzRCUyM0ZGRkZGRiUzQnN0cm9rZVdpZHRoJTNEMiUzQiUyMiUyMGVkZ2UlM0QlMjIxJTIyJTIwcGFyZW50JTNEJTIyMSUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214R2VvbWV0cnklMjB3aWR0aCUzRCUyMjUwJTIyJTIwaGVpZ2h0JTNEJTIyNTAlMjIlMjByZWxhdGl2ZSUzRCUyMjElMjIlMjBhcyUzRCUyMmdlb21ldHJ5JTIyJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhQb2ludCUyMHglM0QlMjI0MjAlMjIlMjB5JTNEJTIyNTIwJTIyJTIwYXMlM0QlMjJzb3VyY2VQb2ludCUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214UG9pbnQlMjB4JTNEJTIyNDIwJTIyJTIweSUzRCUyMjQ4MCUyMiUyMGFzJTNEJTIydGFyZ2V0UG9pbnQlMjIlMjAlMkYlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0MlMkZteEdlb21ldHJ5JTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGbXhDZWxsJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGcm9vdCUzRSUwQSUyMCUyMCUyMCUyMCUzQyUyRm14R3JhcGhNb2RlbCUzRSUwQSUyMCUyMCUzQyUyRmRpYWdyYW0lM0UlMEElM0MlMkZteGZpbGUlM0UlMEE+N4yMAAAAK0lEQVQoU2NkQAKM////d2BgYADhAyBOAwMDQz0DA0PjKGekhQEiHSCnEABi/7exJRbwWgAAAABJRU5ErkJggg==";var ee=z;const le=N(ee);const te=i=>(V("data-v-7e0416d1"),i=i(),k(),i),se=["disabled"],oe=te(()=>l("i",{class:"align-middle","data-feather":"send"},null,-1)),ne=[oe],S=10,Me={__name:"PromptInput",props:{promptInput:{type:String,required:!1}},setup(i){const w=R(),y=v(),n=i;let{resetForm:A,handleSubmit:r,defineField:j}=Z({initialValues:{prompt:""}});const[I,Q]=j("prompt"),U=p(null);let J=p(0);h(()=>n.promptInput,e=>{I.value=e,U.value.$el.focus()});function d(){const e=parseInt(window.getComputedStyle(U.value.$el).getPropertyValue("line-height"));return[Math.floor(U.value.$el.scrollHeight/e),e]}function m(){let[e,M]=d();e=e>S?S:e,e!=J.value&&(J.value=e,U.value.$el.style.height=`${e*M}px`)}const u=r((e,M)=>{if(e.prompt.trim()!==""){const s={session_id:w.session_id,avatar_id:w.avatar.ID,msg:e.prompt};A(),setTimeout(()=>{m(),y.sendPrompt(s)},0)}});return _(()=>{feather.replace(),J.value=d()}),(e,M)=>(o(),W(t(f),{onSubmit:t(u)},{default:L(()=>[l("div",{class:X([{"textarea-container":!0,loading:t(y).isLoading,"form-control":!0},"form-control"])},[b(t(H),{onInput:m,onKeydown:G(Y(t(u),["exact","prevent"]),["enter"]),name:"prompt",modelValue:t(I),"onUpdate:modelValue":M[0]||(M[0]=s=>x(I)?I.value=s:null),type:"text",as:"textarea",class:"",rows:"2",placeholder:"Send a message...",disabled:t(y).isLoading,ref_key:"promptElement",ref:U},null,8,["onKeydown","modelValue","disabled"]),l("button",{class:"send-button btn btn-light",disabled:t(y).isLoading},ne,8,se)],2)]),_:1},8,["onSubmit"]))}},ae=B(Me,[["__scopeId","data-v-7e0416d1"]]);const T=i=>(V("data-v-9149a98d"),i=i(),k(),i),ye={class:"container-fluid"},ie=T(()=>l("h1",{class:"h3 mb-3"},"Avatar",-1)),ce={class:"row"},Ae={class:"col-12"},Ie={class:"card"},Ue={class:"card-body"},de={class:"container d-flex flex-column"},re={class:"col-1 d-flex flex-column"},Te=["src"],Je=["src"],Ce=["onClick","disabled"],pe=T(()=>l("i",{class:"align-middle","data-feather":"refresh-cw"},null,-1)),we=[pe],je=["onClick","disabled"],me=T(()=>l("i",{class:"align-middle","data-feather":"edit"},null,-1)),ue=[me],he={class:"col-10"},Qe={key:0},ge=T(()=>l("span",{class:"me-3"},"I'm thinking... ",-1)),Se={class:"spinner mb-2 me-2"},Be={key:0,src:E,alt:""},Re={key:0},ve={class:"me-3 fst-italic"},_e=T(()=>l("span",{class:"spinner mb-2 me-2"},[l("img",{src:E,alt:""})],-1)),be=["innerHTML"],Ve={key:0,class:"separator opacity-100"},ke=T(()=>l("hr",{class:"border border-3 opacity-100"},null,-1)),Ee={__name:"HomeView",setup(i){const w=q(),y=v(),{messages:n}=F(y),A=R(),r=p(null),j=p(null),I=p(""),Q=new le({breaks:!0}),U=g(()=>n.value.length-1),J=g(()=>{var e;return((e=n.value[U.value])==null?void 0:e.content)||""});async function d(){requestAnimationFrame(()=>{if(r.value){var e=j.value.offsetHeight+30,M=r.value.scrollHeight+e;r.value.scrollTop=M}})}h(n,()=>{d()}),h(J,()=>{d(),feather.replace()}),_(async()=>{try{A.session_id?await y.getPrivateSession(w.params.avatar_id,A.session_id):await A.getSessionToken()}catch(e){console.log(e)}d(),feather.replace(),y.connectWebSocket()});const m=function(M){const s=n.value[M]||{};y.sendPrompt({session_id:A.session_id,avatar_id:A.avatar.ID,msg:s.content||""})},u=function(M){const s=n.value[M]||{};I.value=s.content||"",d()};return(e,M)=>(o(),a("div",ye,[ie,l("div",ce,[l("div",Ae,[l("div",Ie,[l("div",Ue,[l("div",de,[l("div",{ref_key:"conversationContainer",ref:r,class:"conversation-container flex-grow-1 overflow-auto"},[t(n).length>0?(o(!0),a(P,{key:0},D(t(n),(s,C)=>(o(),a("div",{class:"conversation-item row",key:C},[l("div",re,[s.sender==="ai"?(o(),a("img",{key:0,src:t(O),class:"logo",alt:"Avatar Icon",width:"35"},null,8,Te)):c("",!0),s.sender==="human"?(o(),a("img",{key:1,src:t($),class:"logo",alt:"User Icon",width:"35",height:"50"},null,8,Je)):c("",!0),s.sender==="ai"&&C+1==t(n).length?(o(),a("button",{key:2,onClick:()=>m(C-1),class:"retry-button btn my-2 p-0",disabled:t(y).isLoading,title:"Regenerate prompt"},we,8,Ce)):c("",!0),s.sender==="human"?(o(),a("button",{key:3,onClick:()=>u(C),class:"retry-button btn my-2 p-0",disabled:t(y).isLoading,title:"Edit last prompt"},ue,8,je)):c("",!0)]),l("div",he,[s.isLoading?(o(),a("div",Qe,[l("p",null,[ge,l("span",Se,[s.isAgentRunnig?c("",!0):(o(),a("img",Be))])]),s.isAgentRunnig?(o(),a("p",Re,[l("span",ve,"Activating agent: "+K(s.agentName)+"... ",1),_e])):c("",!0)])):(o(),a("div",{key:1,class:"message-content pe-3",innerHTML:t(Q).render(s.content.trim())},null,8,be))]),t(n).length>1&&C!==t(n).length-1?(o(),a("hr",Ve)):c("",!0)]))),128)):c("",!0)],512),l("div",{ref_key:"promptContainer",ref:j,class:"prompt-container"},[ke,b(ae,{promptInput:I.value},null,8,["promptInput"])],512)])])])])])]))}},ze=B(Ee,[["__scopeId","data-v-9149a98d"]]);export{ze as default};
