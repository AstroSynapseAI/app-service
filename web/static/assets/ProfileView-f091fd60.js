import{u as V,r as l,D as k,v as y,o as x,x as f,A as g,f as s,M as i,N as d,y as C,c as h}from"./index-10c4e2e0.js";const I={key:0,class:"adminSpinner"},B={class:"container-fluid p-0"},M=s("h1",{class:"h3 mb-3"},"Account",-1),S={class:"card"},A={class:"card-body"},E={class:"container p-4"},F=s("h3",null,"User Information",-1),L={class:"row"},T={class:"col-6"},j={class:"form-floating mb-3"},q=s("label",{for:"username"},"Username",-1),z={class:"col-6"},G={class:"form-floating mb-3"},H=s("label",{for:"email"},"Email",-1),J={class:"row"},K={class:"col-6"},O={class:"form-floating mb-3"},Q=s("label",{for:"firstName"},"First Name",-1),R={class:"col-6"},W={class:"form-floating mb-3"},X=s("label",{for:"lastName"},"Last Name",-1),Y={class:"row"},Z={class:"col-12"},$=["disabled"],ss=s("hr",null,null,-1),es=s("h3",null,"Change Password",-1),os={class:"row"},as={class:"col-6"},ts={class:"form-floating mb-3"},ls=s("label",{for:"newPassword"},"New Password",-1),ns={class:"col-6"},rs={class:"form-floating mb-3"},cs=s("label",{for:"confirmPassword"},"Confirm Password",-1),is={key:0},ds={key:1},us={class:"row"},ms={class:"col-12"},vs=["disabled"],hs={__name:"ProfileView",setup(_s){const e=V(),c=l(""),n=l(""),r=l(""),u=l(""),m=l(""),p=l("");l("");const v=l(!1),w=l(!1),_=k(),b=()=>{w.value=!0},P=y(()=>!c.value.trim()||!u.value.trim()||!m.value.trim()),N=y(()=>!n.value.trim()||!r.value.trim()||r.value.length<8||n.value!==r.value),U=async()=>{v.value=!0;try{const t={username:c.value,first_name:u.value,last_name:m.value};e.account&&(t.account_id=e.account.ID),await e.saveProfile(e.current.ID,t),_.success("Profile updated successfully!")}catch(t){_.error(t)}finally{v.value=!1}},D=async()=>{v.value=!0;try{await e.changePassword(e.current.ID,{password:n.value}),_.success("Password changed successfully!")}catch(t){_.error(t)}finally{v.value=!1}};return x(async()=>{c.value=e.current.username;try{await e.getUserAccounts(e.current.ID),e.account&&(c.value=e.account.username??"",u.value=e.account.first_name,m.value=e.account.last_name,p.value=e.account.email)}catch(t){console.error(t)}feather.replace()}),(t,o)=>(h(),f(C,null,[v.value?(h(),f("div",I)):g("",!0),s("div",B,[M,s("div",S,[s("div",A,[s("div",E,[F,s("div",L,[s("div",T,[s("div",j,[i(s("input",{type:"text",class:"form-control",id:"username",placeholder:"Username","onUpdate:modelValue":o[0]||(o[0]=a=>c.value=a)},null,512),[[d,c.value]]),q])]),s("div",z,[s("div",G,[i(s("input",{type:"text",class:"form-control",id:"email",placeholder:"Email","onUpdate:modelValue":o[1]||(o[1]=a=>p.value=a)},null,512),[[d,p.value]]),H])])]),s("div",J,[s("div",K,[s("div",O,[i(s("input",{type:"text",class:"form-control",id:"firstName",placeholder:"First Name","onUpdate:modelValue":o[2]||(o[2]=a=>u.value=a)},null,512),[[d,u.value]]),Q])]),s("div",R,[s("div",W,[i(s("input",{type:"text",class:"form-control",id:"lastName",placeholder:"Last Name","onUpdate:modelValue":o[3]||(o[3]=a=>m.value=a)},null,512),[[d,m.value]]),X])])]),s("div",Y,[s("div",Z,[s("button",{class:"btn btn-primary float-end",onClick:U,disabled:P.value},"Save",8,$)])]),ss,es,s("div",os,[s("div",as,[s("div",ts,[i(s("input",{type:"password",class:"form-control",id:"newPassword",placeholder:"New Password","onUpdate:modelValue":o[4]||(o[4]=a=>n.value=a),onInput:b},null,544),[[d,n.value]]),ls])]),s("div",ns,[s("div",rs,[i(s("input",{type:"password",class:"form-control",id:"confirmPassword",placeholder:"Confirm Password","onUpdate:modelValue":o[5]||(o[5]=a=>r.value=a),onInput:b},null,544),[[d,r.value]]),cs,w.value&&n.value!==r.value?(h(),f("div",is," Passwords do not match ")):w.value&&(n.value.length<8||r.value.length<8)?(h(),f("div",ds," New password has to have more than 8 characters ")):g("",!0)])])]),s("div",us,[s("div",ms,[s("button",{class:"btn btn-primary float-end",onClick:D,disabled:N.value},"Change",8,vs)])])])])])])],64))}};export{hs as default};
