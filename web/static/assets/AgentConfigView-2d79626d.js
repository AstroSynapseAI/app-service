import{j as V,A as M,t as f,r as _,o as N,a as i,c as n,b as e,K as P,h as k,f as R,g as F,w as B,d as U,F as A,e as w,E,i as j}from"./index-f3458156.js";import{u as H}from"./avatar.store-18c25ebe.js";import{u as K}from"./agent.store-5e62ba09.js";import{u as $}from"./llm.store-ec0f2299.js";import{u as q}from"./tool.store-0e04b2da.js";const z={class:"container-fluid p-0"},G={class:"h3 mb-3"},J={class:"form-check form-switch float-end me-5"},O=e("label",{class:"form-check-label",for:"flexSwitchCheckDefault"},"Active",-1),Q=["checked"],W={class:"form-check form-switch float-end me-3"},X=e("label",{class:"form-check-label",for:"flexSwitchCheckDefault"},"Public",-1),Y=["checked"],Z={class:"row"},ee={class:"col-12"},te={class:"card"},oe={class:"card-body"},ae={class:"container"},se={class:"row"},ce={class:"col-12"},le=e("h3",null,"Primer",-1),ie={class:"row mt-3"},ne={class:"col-12"},re=e("h3",null,"Agent Model",-1),de=e("option",{value:"",disabled:"",selected:""},"Select a LLM",-1),ue=["value"],ve={class:"row mt-3"},_e={key:0,class:"col-12"},he=e("h3",null,"Agent Tools",-1),me={class:"list-group"},fe=e("i",{"data-feather":"settings",class:"float-end"},null,-1),ge={class:"form-check form-switch float-end me-3"},pe=e("label",{class:"form-check-label",for:"checkboxTool{{ tool.ID }}"},"Active",-1),ke=["onClick","checked"],Se={__name:"AgentConfigView",setup(be){V();const c=H(),l=M(),r=K(),s=f(r,"record"),h=f(r,"activeTools"),b=$(),D=f(b,"records"),g=q(),I=f(g,"records"),d=_(""),y=_(""),m=_(""),u=_(!1),v=_(!1),x=a=>{const o=h.value.find(t=>t.tool.ID==a);return o?o.is_active:!1},S=()=>{u.value=!u.value},T=()=>{v.value=!v.value},C=a=>{const o=h.value.find(t=>t.tool.ID==a.ID);if(!o){const t={active_agent_id:s.value.ID,tool_id:a.ID,tool:a,is_active:!0};h.value.push(t);return}o.is_active=!o.is_active},L=async()=>{const a={ID:parseInt(l.params.active_agent_id),avatar_id:parseInt(l.params.avatar_id),agent_id:parseInt(l.params.agent_id),llm_id:m.value,primer:d.value,is_active:u.value,is_public:v.value};s.value.ID&&(a.ID=s.value.ID);try{await r.saveActiveAgent(a);for(const o of h.value)await g.saveAgentTool(o)}catch(o){console.log(o)}};return N(async()=>{try{await b.getLLMs(),await g.getTools(),await r.getAgent(l.params.agent_id),s.value&&(d.value=s.value.primer,y.value=s.value.name),l.params.active_agent_id&&(await c.getActiveAgent(l.params.agent_id,l.params.avatar_id),await r.getActiveTools(c.activeAgent.agent_id),c.activeAgent&&(m.value=c.activeAgent.llm_id,d.value=c.activeAgent.primer,u.value=c.activeAgent.is_active,v.value=c.activeAgent.is_public))}catch(a){console.log(a)}feather.replace()}),(a,o)=>(i(),n("div",z,[e("h1",G,[P("Configure: "+k(s.value.name)+" ",1),e("div",J,[O,e("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault",checked:u.value,onClick:S},null,8,Q)]),e("div",W,[X,e("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault",checked:v.value,onClick:T},null,8,Y)])]),e("div",Z,[e("div",ee,[e("div",te,[e("div",oe,[e("div",ae,[e("div",se,[e("div",ce,[le,R(F(j),{modelValue:d.value,"onUpdate:modelValue":o[0]||(o[0]=t=>d.value=t),name:"agent_primer",type:"text",as:"textarea",class:"form-control",rows:"8",placeholder:"How should the agent behave..."},null,8,["modelValue"])])]),e("div",ie,[e("div",ne,[re,B(e("select",{"onUpdate:modelValue":o[1]||(o[1]=t=>m.value=t),class:"form-select model-select","aria-label":"Select Model"},[de,(i(!0),n(A,null,w(D.value,(t,p)=>(i(),n("option",{value:t.ID,key:p},k(t.name),9,ue))),128))],512),[[U,m.value]])])]),e("div",ve,[s.value.slug==="search-agent"?(i(),n("div",_e,[he,e("ul",me,[(i(!0),n(A,null,w(I.value,(t,p)=>(i(),n("li",{key:p,class:"list-group-item"},[e("span",null,k(t.name),1),fe,e("div",ge,[pe,e("input",{class:"form-check-input",type:"checkbox",id:"checkboxTool{{ tool.ID }}",onClick:Ae=>C(t),checked:x(t.ID)},null,8,ke)])]))),128))])])):E("",!0)]),e("div",{class:"row mt-3"},[e("div",{class:"col-12"},[e("button",{type:"button",class:"btn btn-secondary",onClick:L},"Save")])])])])])])])]))}};export{Se as default};
