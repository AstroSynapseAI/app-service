import{k,r as l,O as D,D as b,o as C,c as f,G as y,a as s,w as _,v,F as I,g as h}from"./index-92c710bd.js";const V={key:0,class:"adminSpinner"},x={class:"container-fluid p-0"},B=s("h1",{class:"h3 mb-3"},"Account",-1),F={class:"card"},S={class:"card-body"},L={class:"container p-4"},M=s("h3",null,"User Information",-1),T={class:"row"},A={class:"col-6"},E={class:"form-floating mb-3"},G=s("label",{for:"username"},"Username",-1),O={class:"row"},j={class:"col-6"},q={class:"form-floating mb-3"},z=s("label",{for:"firstName"},"First Name",-1),H={class:"col-6"},J={class:"form-floating mb-3"},K=s("label",{for:"lastName"},"Last Name",-1),Q={class:"row"},R={class:"col-12"},W=["disabled"],X=s("hr",null,null,-1),Y=s("h3",null,"Change Password",-1),Z={class:"row"},$={class:"col-6"},ss={class:"form-floating mb-3"},es=s("label",{for:"newPassword"},"New Password",-1),os={class:"col-6"},as={class:"form-floating mb-3"},ts=s("label",{for:"confirmPassword"},"Confirm Password",-1),ls={key:0},ns={key:1},rs={class:"row"},cs={class:"col-12"},is=["disabled"],_s={__name:"ProfileView",setup(ds){const e=k(),c=l(""),n=l(""),r=l(""),i=l(""),d=l("");l(""),l("");const u=l(!1),p=l(!1),m=D(),w=()=>{p.value=!0},g=b(()=>!c.value.trim()||!i.value.trim()||!d.value.trim()),P=b(()=>!n.value.trim()||!r.value.trim()||r.value.length<8||n.value!==r.value),N=async()=>{u.value=!0;try{const a={username:c.value,first_name:i.value,last_name:d.value};e.account&&(a.account_id=e.account.ID),await e.saveProfile(e.current.ID,a),m.success("Profile updated successfully!")}catch(a){m.error(a)}finally{u.value=!1}},U=async()=>{u.value=!0;try{await e.changePassword(e.current.ID,{password:n.value}),m.success("Password changed successfully!")}catch(a){m.error(a)}finally{u.value=!1}};return C(async()=>{c.value=e.current.username;try{await e.getUserAccounts(e.current.ID),e.account&&(c.value=e.account.username??"",i.value=e.account.first_name,d.value=e.account.last_name)}catch(a){console.error(a)}feather.replace()}),(a,o)=>(h(),f(I,null,[u.value?(h(),f("div",V)):y("",!0),s("div",x,[B,s("div",F,[s("div",S,[s("div",L,[M,s("div",T,[s("div",A,[s("div",E,[_(s("input",{type:"text",class:"form-control",id:"username",placeholder:"Username","onUpdate:modelValue":o[0]||(o[0]=t=>c.value=t)},null,512),[[v,c.value]]),G])])]),s("div",O,[s("div",j,[s("div",q,[_(s("input",{type:"text",class:"form-control",id:"firstName",placeholder:"First Name","onUpdate:modelValue":o[1]||(o[1]=t=>i.value=t)},null,512),[[v,i.value]]),z])]),s("div",H,[s("div",J,[_(s("input",{type:"text",class:"form-control",id:"lastName",placeholder:"Last Name","onUpdate:modelValue":o[2]||(o[2]=t=>d.value=t)},null,512),[[v,d.value]]),K])])]),s("div",Q,[s("div",R,[s("button",{class:"btn btn-primary float-end",onClick:N,disabled:g.value},"Save",8,W)])]),X,Y,s("div",Z,[s("div",$,[s("div",ss,[_(s("input",{type:"password",class:"form-control",id:"newPassword",placeholder:"New Password","onUpdate:modelValue":o[3]||(o[3]=t=>n.value=t),onInput:w},null,544),[[v,n.value]]),es])]),s("div",os,[s("div",as,[_(s("input",{type:"password",class:"form-control",id:"confirmPassword",placeholder:"Confirm Password","onUpdate:modelValue":o[4]||(o[4]=t=>r.value=t),onInput:w},null,544),[[v,r.value]]),ts,p.value&&n.value!==r.value?(h(),f("div",ls," Passwords do not match ")):p.value&&n.value.length.trim<8||r.value.length<8?(h(),f("div",ns," New password has to have more than 8 characters ")):y("",!0)])])]),s("div",rs,[s("div",cs,[s("button",{class:"btn btn-primary float-end",onClick:U,disabled:P.value},"Change",8,is)])])])])])])],64))}};export{_s as default};
