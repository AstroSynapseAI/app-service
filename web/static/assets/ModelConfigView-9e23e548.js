import{_ as b,E as y,G as D,D as A,r as v,I as g,o as x,x as u,f as s,C as k,M as C,N as T,h as S,k as V,y as B,z as E,B as N,O as R,c as _,J as O,q as $,s as q}from"./index-10c4e2e0.js";import{u as G}from"./llm.store-9bbaa2aa.js";import{u as z}from"./avatar.store-031b079f.js";const F=n=>($("data-v-54ae4b68"),n=n(),q(),n),J={class:"container-fluid p-0"},P={class:"h3 mb-3"},U={class:"row"},j={class:"col-12 card"},H={class:"card-body"},K={class:"container"},Q={class:"row"},W={class:"col-6"},X={class:"form-floating mb-3"},Y=F(()=>s("label",{for:"floatingInput"},"Token*",-1)),Z={class:"col-6"},ee={class:"row"},se={class:"col-4"},oe={class:"col-4"},te={class:"form-check form-switch float-end me-5"},ae=["for"],ce=["id","checked","onClick"],ne={__name:"ModelConfigView",setup(n){y({ApiToken:D().required()});const p=A(),c=N();R();const i=G(),l=z(),f=v(""),r=v(""),m=g(i,"records"),d=g(l,"activeLLMs"),a=v([]),h=()=>{const e=c.params.provider.toLowerCase();return m.value.filter(o=>o.provider.toLowerCase()===e)},L=e=>{const o=d.value.find(t=>t.llm.ID===e);return o?o.is_active:!1},M=e=>a.value.includes(e),I=async e=>{a.value.includes(e)?a.value=a.value.filter(o=>o!==e):a.value.push(e)},w=async()=>{try{for(const e of h()){const o=d.value.find(t=>t.llm.ID===e.ID);await i.saveLLM({ID:o?o.ID:void 0,token:r.value,avatar_id:parseInt(c.params.avatar_id),llm_id:e.ID,is_active:M(e.ID)})}await l.getActiveLLMs(c.params.avatar_id),p.success("Model configuration saved")}catch(e){console.log(e),p.error("Error while saving model configuration")}};return x(async()=>{c.params.provider==="openai"&&(f.value="GPT by OpenAI");try{await i.getLLMs();for(const e of h())L(e.ID)&&a.value.push(e.ID);await l.getActiveLLMs(c.params.avatar_id);for(const e of d.value)if(e.llm.provider==="OpenAI"&&e.token){r.value=e.token;break}}catch(e){console.log(e)}feather.replace()}),(e,o)=>(_(),u("div",J,[s("h1",P,"Configure: "+k(f.value),1),s("div",U,[s("div",j,[s("div",H,[s("div",K,[s("div",Q,[s("div",W,[s("div",X,[C(s("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>r.value=t),type:"text",name:"ApiToken",class:"form-control",id:"floatingInput",placeholder:"Token..."},null,512),[[T,r.value]]),S(V(O),{name:"ApiToken",class:"text-danger"}),Y])]),s("div",Z,[(_(!0),u(B,null,E(m.value,(t,re)=>(_(),u("div",ee,[s("div",se,[s("p",null,k(t.name),1)]),s("div",oe,[s("div",te,[s("label",{class:"form-check-label",for:t.name},"Active",8,ae),s("input",{class:"form-check-input",type:"checkbox",id:t.name,checked:L(t.ID),onClick:ie=>I(t.ID)},null,8,ce)])])]))),256))])]),s("div",{class:"row mt-3"},[s("div",{class:"col-12"},[s("button",{type:"button",class:"btn btn-primary",onClick:w},"Save")])])])])])])]))}},ue=b(ne,[["__scopeId","data-v-54ae4b68"]]);export{ue as default};
